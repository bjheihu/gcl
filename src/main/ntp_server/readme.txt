https://www.centos.bz/2012/09/ntp-time-server-working-principle/

图1-1 NTP原理图
系统时钟同步过程如下：
设备A发送一个NTP报文给设备B，该报文带有它离开设备A时的时间戳，该时间戳为10:00:00am(T1)。
当此NTP报文到达设备B时，设备B加上自己的时间戳，该时间戳为11:00:01am(T2)。
当此NTP报文离开设备B时，设备B再加上自己的时间戳，改时间戳为11:00:02（T3）。
当设备A接收到该响应报文时，设备A的本地时间为10:00:03am(T4)。
至此，设备A已经拥有足够的信息来计算两个重要的参数：
NTP报文的往返时延Delay=（T4-T1）-（T3-T2）=2 秒。
设备A相对设备B的时间差offset=（（T2-T1）+（T3-T4））/2=1小时。
这样，设备A就能够根据这些信息来设定自己的时钟，使之与设备B的时钟同步。
以上内容只是对NTP工作原理的一个粗略描述，更详细的资料可以参阅RFC 1305。
